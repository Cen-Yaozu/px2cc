/**
 * 文件系统工具函数
 */
import { promises as fs } from 'fs';
import { dirname } from 'path';
/**
 * 确保目录存在，如果不存在则创建
 */
export async function ensureDirectory(dirPath) {
    try {
        await fs.mkdir(dirPath, { recursive: true });
    }
    catch (error) {
        throw new Error(`创建目录失败 ${dirPath}: ${error instanceof Error ? error.message : '未知错误'}`);
    }
}
/**
 * 写入文件，自动创建目录
 */
export async function writeFile(filePath, content) {
    const dir = dirname(filePath);
    await ensureDirectory(dir);
    try {
        await fs.writeFile(filePath, content, 'utf8');
    }
    catch (error) {
        throw new Error(`写入文件失败 ${filePath}: ${error instanceof Error ? error.message : '未知错误'}`);
    }
}
